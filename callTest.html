<!DOCTYPE html>
    <head>
       <script type="text/JavaScript">

            var funcCallPop = function(){
                var textUrl = document.getElementById('textUrl').value;
                var textVal = document.getElementById('textVal').value;
                var document_domain = "";
                if (null == textUrl || ""==textUrl.trim()){
                    alert("there is no target url!");
                    return ;
                }
                var textTargetUrl = textUrl + "?crspkStrNo=" + encodeURIComponent(textVal);

                var url = textTargetUrl.split('//');
                url = url[1].substr(0,url[1].indexOf('/'));

                document_domain = url;

                console.log(textTargetUrl);
                Document.domain = document_domain;

                var webposPop = window.open("","webposPop","fullscreen=no,toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,width=950,height=1020");
                //webposPop.focus();
                webposPop.location.href = textTargetUrl;
                Document.domain = window.location.hostname;
            }

            var callWebPos = function(goStr){
                var textUrl = document.getElementById('textUrl').value;
                var textKey = document.getElementById('textVal').value;
                var document_domain = "";
                if (null == textUrl || ""==textUrl.trim()){
                    alert("there is no target url!");
                    return ;
                }
                var textTargetUrl = textUrl + "?crspkStrNo=" + encodeURIComponent(textKey);

                var pureDomain = textTargetUrl.split('//');
                pureDomain = pureDomain[1].substr(0,pureDomain[1].indexOf('/'));
                console.log("document.domain:"+pureDomain);
                document_domain = pureDomain;

                if (null != document.getElementById("iframeWebpos") ){
                    document.getElementById("iframeWebpos").src = textTargetUrl;
                }else{
                    var iframeWebpos = document.createElement("iframe");
                    iframeWebpos.setAttribute("id", "iframeWebpos");
                    iframeWebpos.setAttribute("name", "iframeWebpos");
                    iframeWebpos.setAttribute("style", "width: 0px; height: 0px; background-color: orange;");
                    iframeWebpos.setAttribute("src", textTargetUrl);
                    document.body.appendChild(iframeWebpos);
                }

                //document.getElementById("iframeWebpos").src = textTargetUrl;
                Document.domain = window.location.hostname;

            }

            

            var callLotteonEcWebPos = function(){
                //var textUrl = "http://smartpick.lotteon.com/webposmain";
                // var textUrl = "http://ldev-smartpick.lotteon.com/webposmain";
                var textUrl = "http://test-smartpick.lotteon.com/webposmain";
                // var textUrl = "http://stg-smartpick.lotteon.com/webposmain";

                var textKey = document.getElementById('textVal').value;    // 암호화된 인증키.
                var document_domain = "";
                if (null == textUrl || ""==textUrl.trim()){
                    alert("there is no target url!");
                    return ;
                }
                var textTargetUrl = textUrl + "?crspkStrNo=" + encodeURIComponent(textKey);

                if (null != document.getElementById("iframeWebpos") ){
                    document.getElementById("iframeWebpos").src = textTargetUrl;
                }else{
                    var iframeWebpos = document.createElement("iframe");
                    iframeWebpos.setAttribute("id", "iframeWebpos");
                    iframeWebpos.setAttribute("name", "iframeWebpos");
                    iframeWebpos.setAttribute("style", "width: 0px; height: 0px; background-color: orange;");
                    iframeWebpos.setAttribute("src", textTargetUrl);
                    document.body.appendChild(iframeWebpos);
                }
            }

            var callLotteonEcWebPosPop = function(parAuthKey){  // for partner system's call
                //var textUrl = "http://smartpick.lotteon.com/webposmain";
                // var textUrl = "http://ldev-smartpick.lotteon.com/webposmain";
                var textUrl = "http://test-smartpick.lotteon.com/webposmain";
                // var textUrl = "http://stg-smartpick.lotteon.com/webposmain";

                var textKey = parAuthKey;    // 암호화된 인증키.
                var textTargetUrl = textUrl + "?crspkStrNo=" + encodeURIComponent(textKey);

                if (null != document.getElementById("iframeWebpos") ){
                    document.getElementById("iframeWebpos").src = textTargetUrl;
                }else{
                    var iframeWebpos = document.createElement("iframe");
                    iframeWebpos.setAttribute("id", "iframeWebpos");
                    iframeWebpos.setAttribute("name", "iframeWebpos");
                    iframeWebpos.setAttribute("style", "width: 0px; height: 0px; background-color: white;");
                    iframeWebpos.setAttribute("src", textTargetUrl);
                    document.body.appendChild(iframeWebpos);
                }    
            }        
        </script>
        <style>
        .divOuter {
            float:left;
            width:100%;
            margin:5px;
        }
        .divText {
            float:left;
            width:48%;
            padding:5px;
            margin:5px;
        }
        
        textarea{
            width:90%;
            height:500px;
        }
        </style>

    </head>

    <body>

        <div style="height: 100px;">&nbsp;</div>

        <div class="divOuter" style="background-color: green;">
            <div class="divText" style="background-color: pink;">
                <select id="selSvrType">
                    <option value="local">local</option>
                    <option value="dev">dev</option>
                    <option value="local">local</option>
                </select>
                URL : <input id="textUrl" size="50" value="smartpick.lotteon.com" placeholder="http://google.com/webposmain" >  
            </div>
            <div class="divText" style="background-color: skyblue;">
                VAL : <input id="textVal" size="50" value="" placeholder="asfsa;dlkj">                
            </div>
            <div class="divText" style="width:96%;background-color: yellow;">
                <input type="button" onClick="funcCallPop();" value="CALL_POP">
            </div>
            <div class="divText" style="width:96%;background-color: yellow;">
                <input type="button" onclick="callLotteonEcWebPos();" value="이동[New Tab]"/>
            </div>
            <div class="divText" style="width:96%;background-color: yellow;">
                <!--
                <iframe  src="" id="iframeWebpos" name="iframeWebpos" width="100%" height="100" style="width: inherit; height: 200px; background-color: orange;">
                    iframe입니다.
                </iframe>
                -->
            </div>
        </div>

    </body>
</html>

